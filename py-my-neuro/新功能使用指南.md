# 新功能使用指南 / New Features Guide

本文档介绍了最新实现的功能及其使用方法。

## 📝 文本过滤功能 (Text Filtering)

### 功能描述
自动过滤AI回复中的（）和**包裹的内容，让字幕和语音更加清晰。

### 使用方法
- 功能默认开启，无需手动配置
- 会自动过滤以下内容：
  - 中文括号：（内容）
  - 英文括号：(content)
  - 双星号：**内容**

### 配置选项
在 `config.json` 中：
```json
{
  "features": {
    "text_filter": true
  }
}
```

### 示例
- 输入：`你好（这是心情描述）世界**这是想法**！`
- 输出：`你好世界！`

---

## 🎨 心情颜色叠加功能 (Mood Color Overlay)

### 功能描述
根据AI的情绪状态在屏幕上叠加不同颜色，增强视觉体验。

### 情绪颜色映射
- 开心：淡黄色
- 生气：淡红色
- 难过：淡蓝色
- 惊讶：淡橙色
- 害羞：淡粉色
- 俏皮：淡紫色

### 快捷键
- `Ctrl+Shift+C`：切换心情颜色叠加
- `Ctrl+Shift+R`：触发随机心情变化

### 配置选项
在 `config.json` 中：
```json
{
  "features": {
    "mood_color": true
  },
  "mood_color": {
    "enabled": true,
    "auto_change": false,
    "auto_interval": 30
  }
}
```

### 工作原理
1. AI回复中包含情绪标签（如`<开心>`）时自动触发
2. 颜色叠加会持续3秒后自动消失
3. 支持自动随机变化模式

---

## 🚶 自由移动功能 (Free Movement)

### 功能描述
让Live2D模型在屏幕上自主移动，增加生动性和趣味性。

### 移动模式
1. **随机漫步** (random_walk)：随机方向移动
2. **圆形移动** (circular)：沿圆形路径移动
3. **8字形移动** (figure_eight)：8字形路径
4. **弹跳移动** (bounce)：遇到边界反弹
5. **巡逻移动** (patrol)：按固定路点移动

### 快捷键
- `Ctrl+Shift+M`：切换自由移动功能

### 配置选项
在 `config.json` 中：
```json
{
  "features": {
    "free_movement": false
  },
  "movement": {
    "enabled": false,
    "speed": 1.0,
    "interval": 5000,
    "pattern": "random_walk"
  }
}
```

### 参数说明
- `speed`: 移动速度 (0.1-3.0)
- `interval`: 移动间隔 (毫秒)
- `pattern`: 默认移动模式

---

## 🎮 使用技巧

### 1. 组合使用
- 开启心情颜色 + 自由移动，创造更生动的AI伙伴
- 文本过滤确保语音和字幕的清晰度

### 2. 性能优化
- 如果电脑性能较低，可以关闭自由移动功能
- 心情颜色叠加对性能影响很小

### 3. 自定义配置
```json
{
  "features": {
    "text_filter": true,
    "mood_color": true,
    "free_movement": false
  },
  "mood_color": {
    "enabled": true,
    "auto_change": true,
    "auto_interval": 60
  },
  "movement": {
    "enabled": false,
    "speed": 0.8,
    "interval": 8000,
    "pattern": "circular"
  }
}
```

---

## 🛠️ 故障排除

### 问题：心情颜色不显示
- 检查配置文件中 `mood_color.enabled` 是否为 `true`
- 确保AI回复中包含有效的情绪标签

### 问题：自由移动不工作
- 检查配置文件中 `movement.enabled` 是否为 `true`
- 确保Live2D模型已正确加载

### 问题：文本过滤过度
- 可以在配置中关闭 `text_filter` 功能
- 检查文本内容是否包含需要保留的括号内容

---

## 📝 更新日志

### v1.1.0 (当前版本)
- ✅ 新增文本过滤功能
- ✅ 新增心情颜色叠加功能
- ✅ 新增自由移动功能
- ✅ 添加配置选项和快捷键支持
- ✅ 完善字幕同步功能

### 下一版本计划
- 🔄 长期记忆系统
- 🔄 AI讲课功能
- 🔄 游戏陪玩功能
- 🔄 Web界面支持

---

## 💡 建议和反馈

如果您在使用过程中遇到问题或有改进建议，请：
1. 查看故障排除部分
2. 检查配置文件格式
3. 在GitHub提交Issue
4. 加入QQ群：756741478 交流讨论